<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>魅族官网首页</title>
<link rel="stylesheet" type="text/css" href="css/reset.css"/>
<link rel="stylesheet" type="text/css" href="css/homepage.css" />
</head>
<body>
	<div id="container"></div>
	<div id="hid1">
		<ul>
			<li id="hl-1"><a href="Note5.html"><img src="img/mx6_23e5fc6.png"/><p>mx6</p><i></i></a></li>
			<li id="hl-2"><a href=""><img src="img/pro5_e0970c9.png"/><p>pro5</p><i></i></a></li>
			<li id="hl-3"><a href=""><img src="img/pro6_d31bab6.png"/><p>pro6</p><i></i></a></li>
			<li id="hl-4"><a href=""><img src="img/pro6plus_e6bf23a.png"/><p>pro6plus</p><i></i></a></li>
			<li id="hl-5"><a href=""><img src="img/pro6s_e769573.png"/><p>pro6s</p><i></i></a></li>
		</ul>
	</div>
	<div id="hid2">
		<ul>
			<li id="hl-1"><a href=""><img src="img/mx6_23e5fc6.png"/><p>mx6</p><i></i></a></li>
			<li id="hl-2"><a href=""><img src="img/pro5_e0970c9.png"/><p>pro5</p><i></i></a></li>
			<li id="hl-3"><a href=""><img src="img/pro6_d31bab6.png"/><p>pro6</p><i></i></a></li>
			<li id="hl-4"><a href=""><img src="img/pro6plus_e6bf23a.png"/><p>pro6plus</p><i></i></a></li>
			<li id="hl-5"><a href=""><img src="img/pro6s_e769573.png"/><p>pro6s</p><i></i></a></li>
			<li id="hl-6"><a href=""><img src="img/pro6s_e769573.png"/><p>pro6s</p><i></i></a></li>
			<li id="hl-7"><a href=""><img src="img/pro6s_e769573.png"/><p>pro6s</p><i></i></a></li>
		</ul>
	</div>
	<div id="hid3">
		<ul>
			<li id="hl-1"><a href=""><img src="img/ep2x_d112722.png"/><p>mx6</p><i></i></a></li>
			<li id="hl-2"><a href=""><img src="img/ep51_7b728d8.png"/><p>pro5</p><i></i></a></li>
			<li id="hl-3"><a href=""><img src="img/hd50_0ef1eab.png"/><p>pro6</p><i></i></a></li>
		</ul>
	</div>
	<div id="hid4">
		<ul>
			<li id="hl-1"><a href=""><img src="img/backpack_b762aa8.png"/><p>mx6</p><i></i></a></li>
			<li id="hl-2"><a href=""><img src="img/band_7b3ed26.png"/><p>pro5</p><i></i></a></li>
			<li id="hl-3"><a href=""><img src="img/loopjacket_003383b.png"/><p>pro6</p><i></i></a></li>
			<li id="hl-4"><a href=""><img src="img/mix_3e3cebd.png"/><p>pro6plus</p><i></i></a></li>
			<li id="hl-5"><a href=""><img src="img/musiccard_77b8fdf.png"/><p>pro6s</p><i></i></a></li>
			<li id="hl-6"><a href=""><img src="img/router_s_82d6bf4.png"/><p>pro6s</p><i></i></a></li>
			<li id="hl-7"><a href=""><img src="img/tvbox_cd026fb.png"/><p>pro6s</p><i></i></a></li>
		</ul>
	</div>
	<div id="header">
		<a id="logo" href=""></a>
		<a id="nar-1" href="">魅族商城</a>
		<a id="nar-2" href="">魅族手机</a>
		<a id="nar-3" href="">魅蓝手机</a>
		<a id="nar-4" href="">魅族声学</a>
		<a id="nar-5" href="">智能 · 配件</a>
		<a id="nar-6" href="sever.html">服务</a>
		<a id="nar-7" href="">专卖店</a>
		<a id="nar-8" href="Flyme.html">flyme</a>
		<a id="nar-9" href="">社区</a>
		<div id="user">
			<img src="img/log-default-avatar_a44f0e7.png"/>
			<span id="down"></span>
			<div id="user-hid">
				<a id="log-in" href="login.html">立即登录</a>
				<a id="register" href="register.html">没有账号？<span style="color: #25a5ff;">立即注册</span></a>
				<a id="myshopcar" href="">我的购物车</a>
				<a id="myorder" href="">我的订单</a>
				<a id="M" href="">M码通道</a>
			</div>
		</div>
	</div>
	<div id="m-a">
		<a id="m-a1" href=""><img src="img/1484201827248.jpg"/></a>
		<a id="m-a2" href=""><img src="img/1462760369902.jpg"/></a>
		<a id="m-a3" href="EngineerInterview.html"><img src="img/1484205402267.jpg"/></a>
	</div>
	<div id="footer">
		<div id="wrap">
			<div id="wrap-top">
				<ul id="wt-1">
					<li style="font-size: 14px;font-weight: 700;color: #666;">魅族商城</li>
					<li><a href="">魅蓝 Note5</a></li>
					<li><a href="">PRO 6 Plus</a></li>
					<li><a href="">魅蓝 X</a></li>
					<li><a href="">魅蓝 5</a></li>
				</ul>
				<ul id="wt-2">
					<li style="font-size: 14px;font-weight: 700;color: #666;">服务支持</li>
					<li><a href="">寄送快修</a></li>
					<li><a href="">上门快修</a></li>
					<li><a href="">预约维修</a></li>
					<li><a href="">VIP注册</a></li>
				</ul>
				<ul id="wt-3">
					<li style="font-size: 14px;font-weight: 700;color: #666;">flyme</li>
					<li><a href="">固件下载</a></li>
					<li><a href="">开放平台</a></li>
					<li><a href="">软件商店</a></li>
					<li><a href="">查找手机</a></li>
				</ul>
				<ul id="wt-4">
					<li style="font-size: 14px;font-weight: 700;color: #666;">关于我们</li>
					<li><a href="">关于魅族</a></li>
					<li><a href="">加入我们</a></li>
					<li><a href="">联系我们</a></li>
					<li><a href="">意见反馈</a></li>
				</ul>
				<div id="tel">
					<p>24小时全国服务热线</p>
					<span>400-788-3333</span>
					<div id="sever">
						<img src="img/icon-phone_d23e91d.png"/>
						<div id="text">
							24小时在线客服
						</div>
					</div>
				</div>
			</div>
			<hr />
			<div id="f-l">
				<a href="">粤ICP备13003602号-2</a> <a href="">粤B2-20130198</a> <a href="">营业执照</a> <a href="">法律声明</a> <i id="i1"></i> 粤公网安备 44049102496009 号 <i id="i2"></i><i id="i3"></i><i id="i4"></i> <a id="lanuage" href="">Select Region</a><br />
				珠海市魅族通讯设备有限公司     地址：广东省珠海市唐家湾科技创新海岸魅族科技楼 电话：0756-6130440<br />
				©2017 Meizu Telecom Equipment Co., Ltd. All rights reserved.          
			</div>
			<div id="con-type">
				关注我们<a id="weibo" href=""></a>&nbsp;&nbsp; | <a id="weixin" href=""><div id="wx-code">
					<img src="img/wx-code_a645982.png"/>
				</div></a>&nbsp;&nbsp; |<a id="qone" href=""></a>
			</div>
		</div>
	</div>
<script src='js/delaunay.js'></script> 
<script src='js/TweenMax.js'></script> 
<script>

const TWO_PI = Math.PI * 2;

var images = [], 
    imageIndex = 0;

var image,
    imageWidth = 1903,
    imageHeight = 760;
 
var vertices = [],
    indices = [],
    prevfrag = [],
    fragments = [];

var margin = 50;

var container = document.getElementById('container');

var clickPosition = [imageWidth * 0.5, imageHeight * 0.5];

window.onload = function(){
	var oa1=document.getElementById('nar-2');
	var oa2=document.getElementById('nar-3');
	var oa3=document.getElementById('nar-4');
	var oa4=document.getElementById('nar-5');
	var ohid1=document.getElementById('hid1');
	var ohid2=document.getElementById('hid2');
	var ohid3=document.getElementById('hid3');
	var ohid4=document.getElementById('hid4');
	var oh1ls=ohid1.getElementsByTagName('li');
	var oh2ls=ohid2.getElementsByTagName('li');
	var oh3ls=ohid3.getElementsByTagName('li');
	var oh4ls=ohid4.getElementsByTagName('li');
	oa1.onmouseover=function(){
		var i=0;
		ohid1.style.display='block';
		ohid1.className='change';
		toleft=setInterval(function(){
			oh1ls[i].className='move';
			i++;
		},100);
		if(i>4){
			clearInterval(toleft);
		};
	};
	oa1.onmouseout=function(){
		timer=setTimeout(function(){
			ohid1.style.display='none';
		},500);
//		ohid1.className='';
	};
	ohid1.onmouseover=function(){
		clearTimeout(timer);
	};
	ohid1.onmouseleave=function(){
		ohid1.style.display='none';
		for(var i=0;i<5;i++){
			oh1ls[i].className='';
		};
	};
	oa2.onmouseover=function(){
		var i=0;
		ohid2.style.display='block';
		ohid2.className='change';
		toleft=setInterval(function(){
			oh2ls[i].className='move';
			i++;
		},100);
		if(i>6){
			clearInterval(toleft);
		};
	};
	oa2.onmouseout=function(){
		timer=setTimeout(function(){
			ohid2.style.display='none';
		},500);
	};
	ohid2.onmouseover=function(){
		clearTimeout(timer);
	};
	ohid2.onmouseleave=function(){
		ohid2.style.display='none';
		for(var i=0;i<7;i++){
			oh2ls[i].className='';
		};
	};
	oa3.onmouseover=function(){
		var i=0;
		ohid3.style.display='block';
		ohid3.className='change';
		toleft=setInterval(function(){
			oh3ls[i].className='move';
			i++;
		},100);
		if(i>2){
			clearInterval(toleft);
		};
	};
	oa3.onmouseout=function(){
		timer=setTimeout(function(){
			ohid3.style.display='none';
		},500);
	};
	ohid3.onmouseover=function(){
		clearTimeout(timer);
	};
	ohid3.onmouseleave=function(){
		ohid3.style.display='none';
		for(var i=0;i<3;i++){
			oh3ls[i].className='';
		};
	};
	oa4.onmouseover=function(){
		var i=0;
		ohid4.style.display='block';
		ohid4.className='change';
		toleft=setInterval(function(){
			oh4ls[i].className='move';
			i++;
		},100);
		if(i>6){
			clearInterval(toleft);
		};
	};
	oa4.onmouseout=function(){
		timer=setTimeout(function(){
			ohid4.style.display='none';
		},500);
	};
	ohid4.onmouseover=function(){
		clearTimeout(timer);
	};
	ohid4.onmouseleave=function(){
		ohid4.style.display='none';
		for(var i=0;i<7;i++){
			oh4ls[i].className='';
		};
	};
    TweenMax.set(container, {perspective:500});

    // images from http://www.hdwallpapers.in
    var urls = [
            'img/1.jpg',
            'img/2.jpg',
            'img/3.jpg'
        ],
        image,
        loaded = 0;
    // very quick and dirty hack to load and display the first image asap
    images[0] = image = new Image();
        image.onload = function() {
            if (++loaded === 1) {
                
                for (var i = 1; i < 3; i++) {
                    images[i] = image = new Image();

                    image.src = urls[i];
                } 
                placeImage();
            }
        };
        image.src = urls[0]; 
};

function placeImage(transitionIn) {
    image = images[imageIndex];

    if (++imageIndex === images.length) imageIndex = 0;
  
    var num = Math.random();
    if(num < .25) {
      image.direction = "left";
    } else if(num < .5) {
      image.direction = "top";
    } else if(num < .75) {
      image.direction = "bottom";
    } else {
      image.direction = "right";
    }

    container.appendChild(image);
    image.style.opacity = 0;
  
    if (transitionIn !== false) {
        triangulateIn();
    }
}

function triangulateIn(event) {
    var box = image.getBoundingClientRect(),
        top = box.top,
        left = box.left;
  
    if(image.direction == "left") {
      clickPosition[0] = 0; 
      clickPosition[1] = imageHeight / 2;
    } else if(image.direction == "top") {
      clickPosition[0] = imageWidth / 2;
      clickPosition[1] = 0;
    } else if(image.direction == "bottom") {
      clickPosition[0] = imageWidth / 2;
      clickPosition[1] = imageHeight;
    } else if(image.direction == "right") {
      clickPosition[0] = imageWidth;
      clickPosition[1] = imageHeight / 2;
    } 
    

    triangulate();
    build();
}

function triangulate() {
    for(var i = 0; i < 40; i++) {      
      x = -margin + Math.random() * (imageWidth + margin * 2);
      y = -margin + Math.random() * (imageHeight + margin * 2);
      vertices.push([x, y]);
    }
    vertices.push([0,0]);
    vertices.push([imageWidth,0]);
    vertices.push([imageWidth, imageHeight]);
    vertices.push([0, imageHeight]);
  
    vertices.forEach(function(v) {
        v[0] = clamp(v[0], 0, imageWidth);
        v[1] = clamp(v[1], 0, imageHeight);
    });
  
    indices = Delaunay.triangulate(vertices);
}

function build() {
    var p0, p1, p2,
        fragment;

    var tl0 = new TimelineMax({onComplete:buildCompleteHandler});

    for (var i = 0; i < indices.length; i += 3) {
        p0 = vertices[indices[i + 0]];
        p1 = vertices[indices[i + 1]];
        p2 = vertices[indices[i + 2]];

        fragment = new Fragment(p0, p1, p2);

        var dx = fragment.centroid[0] - clickPosition[0],
            dy = fragment.centroid[1] - clickPosition[1],
            d = Math.sqrt(dx * dx + dy * dy),
            rx = 30 * sign(dy),
            ry = 90 * -sign(dx),
            delay = d * 0.003 * randomRange(0.9, 1.1);
        fragment.canvas.style.zIndex = Math.floor(d).toString();

        var tl1 = new TimelineMax(); 

        if(image.direction == "left") {
          rx = Math.abs(rx); 
          ry = 0;          
        } else if(image.direction == "top") {
          rx = 0;
          ry = Math.abs(ry);
        } else if(image.direction == "bottom") {
          rx = 0;
          ry = - Math.abs(ry);
        } else if(image.direction == "right") {
          rx = - Math.abs(rx);
          ry = 0;
        } 
        
        tl1.from(fragment.canvas, 1, {
              z:-50,
              rotationX:rx,
              rotationY:ry,
              scaleX:0,
              scaleY:0,
              ease:Cubic.easeIn
         });
        tl1.from(fragment.canvas, 0.4,{alpha:0}, 0.6);
      
        tl0.insert(tl1, delay);

        fragments.push(fragment);
        container.appendChild(fragment.canvas);
    }
}

function buildCompleteHandler() {
    // add pooling?
    image.style.opacity = 1;
    image.addEventListener('transitionend', function catchTrans() {
      fragments.forEach(function(f) {
          container.removeChild(f.canvas);
      });

      fragments.length = 0;
      vertices.length = 0;
      indices.length = 0;

      placeImage();
      this.removeEventListener('transitionend',catchTrans,false);
    }, false);
    
}

//////////////
// MATH UTILS
//////////////

function randomRange(min, max) {
    return min + (max - min) * Math.random();
}

function clamp(x, min, max) {
    return x < min ? min : (x > max ? max : x);
}

function sign(x) {
    return x < 0 ? -1 : 1;
}

//////////////
// FRAGMENT
//////////////

Fragment = function(v0, v1, v2) {
    this.v0 = v0;
    this.v1 = v1;
    this.v2 = v2;

    this.computeBoundingBox();
    this.computeCentroid();
    this.createCanvas();
    this.clip();
};
Fragment.prototype = {
    computeBoundingBox:function() {
        var xMin = Math.min(this.v0[0], this.v1[0], this.v2[0]),
            xMax = Math.max(this.v0[0], this.v1[0], this.v2[0]),
            yMin = Math.min(this.v0[1], this.v1[1], this.v2[1]),
            yMax = Math.max(this.v0[1], this.v1[1], this.v2[1]);

         this.box = {
            x:Math.round(xMin),
            y:Math.round(yMin),
            w:Math.round(xMax - xMin),
            h:Math.round(yMax - yMin)
        };

    },
    computeCentroid:function() {
        var x = (this.v0[0] + this.v1[0] + this.v2[0]) / 3,
            y = (this.v0[1] + this.v1[1] + this.v2[1]) / 3;

        this.centroid = [x, y];
    },
    createCanvas:function() {
        this.canvas = document.createElement('canvas');
        this.canvas.width = this.box.w;
        this.canvas.height = this.box.h;
        this.canvas.style.width = this.box.w + 'px';
        this.canvas.style.height = this.box.h + 'px';
        this.canvas.style.left = this.box.x + 'px';
        this.canvas.style.top = this.box.y + 'px';
        this.ctx = this.canvas.getContext('2d');
    },
    clip:function() {
        this.ctx.save();
        this.ctx.translate(-this.box.x, -this.box.y);
        this.ctx.beginPath();
        this.ctx.moveTo(this.v0[0], this.v0[1]);
        this.ctx.lineTo(this.v1[0], this.v1[1]);
        this.ctx.lineTo(this.v2[0], this.v2[1]);
        this.ctx.closePath();
        this.ctx.clip();
        this.ctx.drawImage(image, 0, 0);
        this.ctx.restore();
    }
};//@ sourceURL=pen.js
</script>
</body>
</html>
